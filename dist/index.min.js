var o=class extends CustomEvent{constructor(e){super("change",{detail:e,bubbles:!0,cancelable:!0})}},l=class{constructor(e,t=[],s={}){this.options=[],this.isOpen=!1,this.options=t,this.config=Object.assign({placeholder:"Select option",searchable:!1,clearable:!1},s),this.initContainer(e),this.init()}init(){this.initSelectButton(),this.initDropdown(),this.initSearchInput(),this.renderOptions(),this.outsideClickHandler=this.handleOutsideClick.bind(this),document.addEventListener("click",this.outsideClickHandler)}initContainer(e){let t=document.querySelector(e);if(t===null)throw new Error(`Element with selector "${e}" not found`);this.container=t,this.node=document.createElement("div"),this.node.classList.add("lobster-select"),this.container.appendChild(this.node)}initDropdown(){this.dropdown=document.createElement("div"),this.dropdown.classList.add("lobster-select__dropdown"),this.node.appendChild(this.dropdown)}initSelectButton(){this.selectButton=document.createElement("div"),this.selectButton.classList.add("lobster-select__button");let e=document.createElement("span");e.classList.add("lobster-select__button-text"),e.textContent=this.config.placeholder;let t=document.createElement("span");if(t.classList.add("lobster-select__button-arrow"),this.config.clearable){let s=document.createElement("span");s.classList.add("lobster-select__clear-button"),s.addEventListener("click",i=>{i.stopPropagation(),this.clear();let n=new o({value:"",label:""});this.node.dispatchEvent(n)}),this.selectButton.appendChild(s),this.node.classList.add("lobster-select--clearable")}this.selectButton.appendChild(e),this.selectButton.appendChild(t),this.node.appendChild(this.selectButton),this.selectButton.addEventListener("click",()=>this.toggle())}initSearchInput(){if(!this.config.searchable)return;let e=document.createElement("div");e.classList.add("lobster-select__search"),this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.placeholder="Search...",this.searchInput.classList.add("lobster-select__search-input"),e.appendChild(this.searchInput),this.dropdown.appendChild(e),this.searchInput.addEventListener("input",()=>this.handleSearch())}renderOptions(){let e=document.createElement("div");e.classList.add("lobster-select__options"),this.options.forEach(s=>{let i=document.createElement("div");i.classList.add("lobster-select__option"),s.disabled&&i.classList.add("lobster-select__option--disabled"),i.textContent=s.label,s.disabled||i.addEventListener("click",()=>this.selectOption(s)),e.appendChild(i)});let t=this.dropdown.querySelector(".lobster-select__options");t&&this.dropdown.removeChild(t),this.dropdown.appendChild(e)}handleSearch(){if(!this.searchInput)return;let e=this.searchInput.value.toLowerCase(),t=this.options.filter(i=>i.label.toLowerCase().includes(e)),s=this.dropdown.querySelector(".lobster-select__options");s&&(s.innerHTML="",t.forEach(i=>{let n=document.createElement("div");n.classList.add("lobster-select__option"),i.disabled&&n.classList.add("lobster-select__option--disabled"),n.textContent=i.label,i.disabled||n.addEventListener("click",()=>this.selectOption(i)),s.appendChild(n)}))}selectOption(e){this.selectedOption=e;let t=this.selectButton.querySelector(".lobster-select__button-text");t&&(t.textContent=e.label),this.node.classList.add("has-value"),this.dropdown.querySelectorAll(".lobster-select__option").forEach((i,n)=>{let d=this.options[n].value===e.value;i.classList.toggle("lobster-select__option--selected",d)}),this.close();let s=new o({value:e.value,label:e.label});this.node.dispatchEvent(s)}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen=!0,this.node.classList.add("lobster-select--open"),this.searchInput&&this.searchInput.focus()}close(){this.isOpen=!1,this.node.classList.remove("lobster-select--open"),this.searchInput&&(this.searchInput.value="",this.renderOptions())}handleOutsideClick(e){this.node.contains(e.target)||this.close()}getValue(){var e;return(e=this.selectedOption)===null||e===void 0?void 0:e.value}setValue(e){let t=this.options.find(s=>s.value===e);t&&this.selectOption(t)}clear(e=!1){if(!this.config.clearable&&!e){console.warn("Clearable is disabled");return}this.selectedOption=void 0;let t=this.selectButton.querySelector(".lobster-select__button-text");t&&(t.textContent=this.config.placeholder||""),this.node.classList.remove("has-value"),this.dropdown.querySelectorAll(".lobster-select__option").forEach(i=>{i.classList.remove("lobster-select__option--selected")})}updateOptions(e){this.options=e,this.renderOptions()}disable(){this.node.classList.add("lobster-select--disabled"),this.selectButton.removeEventListener("click",()=>this.toggle())}enable(){this.node.classList.remove("lobster-select--disabled"),this.selectButton.addEventListener("click",()=>this.toggle())}destroy(){this.node.remove(),this.outsideClickHandler!==null&&document.removeEventListener("click",this.outsideClickHandler)}};export{l as Select};
//# sourceMappingURL=index.min.js.map
